# Документация app.py

## Описание

Файл app.py является основным файлом приложения Network Tools, который содержит Flask-приложение и все необходимые функции для работы с IP-адресами и подсетями.

## Основные компоненты

### Функции

#### IP-преобразования
```python
def ip_to_binary(ip)
```
- Преобразует IP-адрес в двоичный формат
- Принимает строку IP-адреса
- Возвращает строку двоичного представления

```python
def binary_to_ip(binary)
```
- Преобразует двоичное представление в IP-адрес
- Принимает строку двоичного числа
- Возвращает строку IP-адреса

#### Валидация
```python
def validate_ip(ip)
```
- Проверяет корректность IP-адреса
- Возвращает True/False

```python
def parse_mask(mask)
```
- Преобразует маску подсети в числовое значение
- Поддерживает CIDR и маски в формате IP
- Возвращает None при ошибке

#### Подсеть
```python
def cidr_to_mask(cidr)
```
- Преобразует CIDR в маску подсети
- Возвращает строку маски в формате IP

```python
def get_host_range(network, mask)
```
- Получает диапазон адресов хостов
- Возвращает кортеж (первый_хост, последний_хост)

```python
def calculate_subnet_parameters(ip_address, current_mask, new_mask)
```
- Рассчитывает параметры подсети
- Возвращает словарь с результатами

### Flask маршруты

#### Статические страницы
```python
@app.route('/')
def index()
```
- Главная страница приложения
- Отображает шаблон index.html

```python
@app.route('/ip-converter')
def ip_converter()
```
- Страница конвертера IP
- Отображает шаблон ip_converter.html

```python
@app.route('/subnet-calculator')
def subnet_calculator()
```
- Страница калькулятора подсетей
- Отображает шаблон subnet_calculator.html

#### API маршруты
```python
@app.route('/api/ip-to-binary', methods=['POST'])
def api_ip_to_binary()
```
- Конвертация IP в двоичный формат
- Принимает параметр: ip
- Возвращает HTML с результатом

```python
@app.route('/api/binary-to-ip', methods=['POST'])
def api_binary_to_ip()
```
- Конвертация двоичного формата в IP
- Принимает параметр: binary
- Возвращает HTML с результатом

```python
@app.route('/api/calculate-subnet', methods=['POST'])
def api_calculate_subnet()
```
- Расчет параметров подсети
- Принимает параметры: ip, current_mask, new_mask
- Возвращает JSON с результатами

## Основные переменные
```python
app = Flask(__name__)
```
- Основной объект Flask приложения

## Порты и режимы
```python
if __name__ == '__main__':
    app.run(debug=True, port=5001)
```
- Запуск приложения
- Порт: 5001
- Режим отладки: включен

## Обработка ошибок

- Валидация IP-адресов
- Проверка масок подсетей
- Обработка некорректного ввода
- Обработка исключений

## Примеры использования

### Конвертация IP
```python
# Преобразование IP в двоичный формат
binary = ip_to_binary("192.168.1.1")
# Результат: "11000000101010000000000100000001"

# Преобразование двоичного формата в IP
ip = binary_to_ip("11000000101010000000000100000001")
# Результат: "192.168.1.1"
```

### Расчет подсети
```python
result = calculate_subnet_parameters(
    ip_address="192.168.1.0",
    current_mask=24,
    new_mask=26
)

# Результат:
{
    'subnet_bits': 2,
    'subnets_created': 4,
    'addresses_in_subnet': 64,
    'usable_hosts': 62,
    'subnet_address': '192.168.1.0',
    'first_host': '192.168.1.1',
    'last_host': '192.168.1.62',
    'broadcast_address': '192.168.1.63',
    'new_mask_dotted': '255.255.255.192',
    'new_mask': 26
}
```

## Рекомендации по использованию

1. Всегда проверяйте валидность IP-адресов перед использованием
2. Используйте функции валидации для проверки корректности ввода
3. Обрабатывайте исключения при работе с IP-адресами
4. Тестируйте функции на разных примерах

## Технические детали

### Форматы данных
- IP-адреса: строка в формате "x.x.x.x"
- Маски подсетей: числовое значение (0-32) или строка в формате IP
- Двоичные числа: строка без ведущих нулей

### Ограничения
- IP-адреса: 4 октета (0-255)
- Маски подсетей: 0-32
- Двоичные числа: 32 бита

### Производительность
- Оптимизированные алгоритмы для работы с IP-адресами
- Минимальное использование памяти
- Быстрая обработка запросов
